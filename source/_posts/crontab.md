---
title: "crontab"
date: 2013-09-03 13:15
tags: CoolTool
---
在linux下面有许许多多有用的工具，能够极大解放生产力。crontab就是其中的一个工具软件。

crontab用于在一定的时间间隔调度一些命令的执行（以一定的频率执行用户事先确定好的命令，脚本等）。系统有一个/etc/crontab文件，里面存放了系统的调度程序。除此之外，每个用户都可以建立自己的crontab。这些用户自己的crontab文件在/var/spool/cron/username目录下。比如我的文件夹就是/var/spool/cron/alex。

crontab命令的用法简单而功能强大：用户只要编辑一个文本文档，就可以让crontab在规定的时间间隔里执行相应的命令。编辑这个文件的格式如下图所示：

{% img http://asxalex.qiniudn.com/crontab.png %}
<!--more-->
如上图所示，crontab中共有6个字段，前5个字段用于确定command的执行频率（容易看出，命令执行之间的间隔时间最小是1分钟）。最后一个字段用于制定所需要完成的动作。在实际应用中，我们可以使用如下命令：

```c++
$ crontab -l #查看用户此时的crontab中的内容
$ crontab -e #调用编辑器，让用户自己编辑crontab中的内容
```

在自己编辑crontab中的内容时，前5个字段的每个字段都有相同的格式，说明如下：

* 具体数字代表在那个时刻执行；

* \*是一个通配符，表示每个时间单位都要执行；

* a-b表示在a-b个时间单位内都要执行，其他时间单位不执行；

* \*/n 表示每隔n个时间单位执行一次；

* a,b,c 表示在a，b，c这三个时间单位点上要执行；

举个栗子：

> \*/5 2-12 \*2 1-3,6-12 * /home/alex/colorful-life.sh

根据格式说明，以上一段的意思是：在一年中，除了4月和5月之外的其他月份，在每月的2号，12号，22号3天中，从凌晨2点到中午12点，每5分钟执行一次/home/alex/colorful-life.sh这个脚本。

我第一次使用的测试例子如下：

```c++ 
* * * * * date | sed 's/\ \{2,\}/\ /g' | cut -d ' ' -f 4 | xargs echo >> myalex
```

执行到现在，myalex中的文本如下：

```c++
13:03:01
13:04:01
13:05:01
13:06:01
13:07:01
13:08:01
13:09:01
13:10:01
13:11:01
13:12:01
13:13:01
13:14:01
13:15:01
13:16:01
13:17:01
13:18:01
13:19:01
13:20:01
13:21:01
13:22:01
13:23:01
```

（EOF）
